(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1156:function(e,t,a){var n=a(25),i=a(1157);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},r=(n(i,o),i.locals?i.locals:{});e.exports=r},1157:function(e,t,a){(t=a(26)(!1)).push([e.i,".merchant-ratings-header .reviewArrow {\n    width: 20px;\n    height: 20px;\n    position: absolute;\n    top: 4px;\n    right: -4px;\n}\n\n.dialog.title {\n    padding: 16px 16px 10px;\n    border-bottom: 1px solid rgba(0, 0, 0, 0.12);\n}\n\n.title .headingContainer {\n    font-size: 20px;\n    line-height: 24px;\n    position: relative;\n    font-weight: 600;\n}\n\n.headingContainer .merchantName{\n    font-size: 16px;\n    line-height: 20px;\n    color: rgba(0, 0, 0, 0.54);\n    position: relative;\n    top: -4px;\n    font-weight: normal;\n}\n\n.headingContainer .close-icon {\n    position: absolute;\n    top: 2px;\n    right: 0px;\n    width: 28px;\n    cursor: pointer;\n}\n\n.contentContainer {\n    overflow: scroll;\n}\n\n.contentContainer .rating-details{\n    padding: 10px 26px;\n    display: flex;\n    align-items: center;\n    gap: 20px;\n}\n\n.rating-details .rating-value {\n    text-align: center;\n    flex-basis: 30%;\n}\n\n.rating-value .rating{\n    font-size: 40px;\n    line-height: 44px;\n    color: rgb(0, 138, 59);\n    font-weight: 600;\n}\n\n.rating-value .max-value {\n    font-size: 24px;\n    line-height: 28px;\n    color: rgba(0, 0, 0, 0.2);\n}\n\n.rating-value .rating-count{\n    font-size: 16px;\n    line-height: 20px;\n    color: rgba(0, 0, 0, 0.54);\n}\n\n.contentContainer .count-division-detail{\n    padding: 12px;\n    flex-basis: 70%;\n    border-left: 1px solid rgba(0, 0, 0, 0.12);\n}\n\n.count-division-detail .detail-container{\n    display: flex;\n    align-items: center;\n    height: 22px;\n}\n\n.detail-container .count-label{\n    font-size: 14px;\n    color: rgba(0, 0, 0, 0.87);\n    min-width: 24px;\n}\n\n.count-label .star {\n    position: relative;\n    top: 2px;\n    height: 14px;\n}\n\n.detail-container .ratingBarHolder{\n    display: inline-block;\n    background: rgb(236, 238, 244);\n    width: 184px;\n    height: 12px;\n    margin: 0px 6px;\n    border-radius: 6px;\n}\n\n.ratingBarHolder .ratingBar {\n    height: 12px;\n    border-radius: 6px;\n}\n\n.detail-container .rating-count{\n    font-size: 12px;\n    color: rgba(0, 0, 0, 0.54);\n}\n\n.contentContainer .topReviewsContainer{\n    padding: 16px;\n}\n\n.topReviewsContainer .containerHeading {\n    text-align: center;\n    font-size: 14px;\n    line-height: 18px;\n    color: rgba(0, 0, 0, 0.87);\n    font-weight: 600;\n}\n\n.topReviewsContainer .subContainer.default {\n    grid-template-columns: 80px 80px 80px;\n}\n\n.topReviewsContainer .subContainer.one {\n    grid-template-columns: 80px;\n}\n\n.topReviewsContainer .subContainer.two {\n    grid-template-columns: 80px 80px;\n}\n\n.topReviewsContainer .subContainer {\n    display: grid;\n    align-items: start;\n    gap: 50px;\n    padding: 24px 0px;\n    margin: 0px auto;\n    max-width: max-content;\n}\n\n.subContainer .singleReview {\n    display: flex;\n    flex-direction: column;\n    position: relative;\n}\n\n.singleReview .chartContainer{\n    position: relative;\n    margin: auto;\n}\n\n.chartContainer .track {\n    width: 60px;\n    height: 60px;\n    transform: rotate(-90deg);\n    position: absolute;\n    left: 0px;\n    top: 0px;\n    color: rgba(0, 0, 0, 0.2);\n}\n\n.chartContainer .fill {\n    width: 60px;\n    height: 60px;\n    transform: rotate(-90deg);\n    color: rgb(0, 137, 123);\n}\n\n.singleReview .percentage {\n    text-align: center;\n    position: absolute;\n    top: 22px;\n    left: 2px;\n    font-size: 14px;\n    line-height: 18px;\n    font-weight: bold;\n    color: rgba(0, 0, 0, 0.87);\n    width: 100%;\n}\n\n.singleReview .desc {\n    text-align: center;\n    font-size: 14px;\n    line-height: 18px;\n    color: rgba(0, 0, 0, 0.87);\n}\n\n.userComments .commentContainer {\n    display: flex;\n    margin: 20px;\n    gap: 12px;\n    border-bottom: 1px solid rgba(0 0 0 / 0.12);\n    padding-bottom: 8px;\n}\n\n.commentContainer .profile_pic_container {\n    width: 50px;\n    height: 50px;\n    border-radius: 50%;\n}\n\n.profile_pic_container .profile_pic {\n    border-radius: 50%;\n    width: 50px;\n    height: 50px;\n}\n\n.commentContainer .review-text-container{\n    flex-grow: 1;\n}\n\n.review-text-container .userName {\n    font-size: 14px;\n    line-height: 18px;\n    font-weight: 600;\n    padding: 2px;\n}\n\n.review-text-container .extra-info {\n    display: flex;\n    justify-content: space-between;\n    align-items: baseline;\n    font-size: 12px;\n    line-height: 16px;\n    color: rgba(0, 0, 0, 0.54);\n    margin: 2px 0px 4px;\n}\n\n.extra-info .starContainer {\n    display: inline-flex;\n    gap: 2px;\n    position: relative;\n    top: 2px;\n}\n\n.starContainer .single-star {\n    width: 12px;\n}\n\n.extra-info .ratingType {\n    margin-left: 2px;\n    font-weight: 600;\n}\n\n.review-text-container .reviewContent,\n.review-text-container .reviewTitle {\n    font-size: 12px;\n    line-height: 16px;\n}\n\n@media (max-width: 800px) {\n    .headingContainer {\n        font-size: 16px;\n        line-height: 20px;\n    }\n\n    .singleReview .desc,\n    .topReviewsContainer .containerHeading,\n    .headingContainer .merchantName,\n    .rating-value .rating-count {\n        font-size: 12px;\n        line-height: 16px;\n    }\n\n    .headingContainer .close-icon {\n        width: 24px;\n    }\n\n    .rating-value .max-value {\n        font-size: 16px;\n        line-height: 24px;\n    }\n\n    .rating-value .rating {\n        font-size: 32px;\n        line-height: 40px;\n    }\n\n    .detail-container .count-label {\n        font-size: 12px;\n    }\n\n    .count-label .star {\n        height: 12px;\n        top: 1px;\n    }\n\n    .detail-container .rating-count {\n        font-size: 10px;\n    }\n\n    .detail-container .ratingBarHolder {\n        height: 8px;\n        border-radius: 4px;\n        width: 170px;\n    }\n\n    .ratingBarHolder .ratingBar {\n        height: 8px;\n        border-radius: 4px;\n    }\n\n    .count-division-detail .detail-container {\n        height: 20px;\n    }\n\n    .topReviewsContainer .subContainer {\n        gap: 30px;\n    }\n\n    .singleReview .percentage {\n        top: 24px;\n        font-size: 12px;\n        line-height: 16px;\n    }\n}",""]),e.exports=t},591:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(11)),i=h(a(10)),o=h(a(12)),r=h(a(14)),s=h(a(13)),l=a(0),c=h(l),p=h(a(53)),d=a(582),u=a(8),m=a(29),g=a(39);function h(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){(0,i.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));a.getReadableTime=function(e){if(!e)return"";var t=(e=e.split(":"))[0],a=e[1],n=" am";return(t=parseInt(t))>=12&&(n=" pm",t-=12),t<1&&(t=12),t+":"+a+n},a.getTimingText=function(e,t){return a.getReadableTime(e)+" - "+a.getReadableTime(t)},a.getOpenTimings=function(e){new Date;var t=new Array,a=m.CLOSED_NOW;if((0,u.isEmpty)(e[(0,u.getWeekDay)()]))return[a,""];e[(0,u.getWeekDay)()].slot,e[(0,u.getWeekDay)()].slot.map((function(e){e[0]!=m.OPEN_NOW&&e[0]!=m.OPEN_ALL_DAY||(a=m.OPEN_NOW),t.push(e[1])}));return t=t.map((function(e,t){return c.default.createElement("div",{className:"timingDetails",key:t}," ",e," ")})),[a,t]},a.handleRequestClose=function(){a.setState({openDialog:!1})},a.showTimings=function(e){mixpanel.track("merchant-actions",{"mp-data-type":"merchant-timings"}),(0,g.sendTrackingEvent)("merchant_timings_popup_opened"),e.stopPropagation(),e.preventDefault(),a.setState({openDialog:!0})},window.innerWidth<800?a.isMobile=!0:a.isMobile=!1;var r=a,s=a.props.timings.map((function(e,t){return{day:e.day,slot:e.time_slots.map((function(e){var t=r.getTimingText(e.opentime,e.closetime),a=(new Date,(0,u.getTimingStatus)(e.opentime,e.closetime));return a!=m.CLOSED_ALL_DAY&&a!=m.OPEN_ALL_DAY||(t=a),[a,t]}))}})),l=a.getOpenTimings(s),p=(new Date).getDay(),d={fontWeight:"700",color:"black"},h=s.map((function(e,t){var a=e.slot.map((function(e,t){return c.default.createElement("div",{key:t,style:{textAlign:"right",color:e[1]==m.CLOSED_ALL_DAY?"#ff455f":""}},e[1])})),n=String.prototype.toLowerCase.call(e.day||"")==m.WEEKDAYS[p<7&&p>=0?p:0];return c.default.createElement("tr",{style:n?d:{color:"rgba(0 0 0 / 0.54)"}},c.default.createElement("td",{style:{padding:"12px 0px"}},(0,u.toTitleCase)(e.day)),c.default.createElement("td",{style:{padding:"12px 0px"}},a))}));return a.state={openDialog:!1,timingStatus:l[0],timingRange:l[1],weeklyTimings:h},a}return(0,s.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){window.location.search.includes("timings_popup")&&this.setState({openDialog:!0})}}]),(0,r.default)(t,[{key:"render",value:function(){var e=this,t={position:"absolute",top:(0,u.isMobileDevice)()?"18px":"26px",right:(0,u.isMobileDevice)()?"16px":"20px",cursor:"pointer"},a=this.state.timingStatus==(m.OPEN_NOW||m.OPEN_ALL_DAY)?"nearMeTimingText timing-status open":"nearMeTimingText timing-status close",n=window.pageName.includes("merchantpage")?"images/merchant/arrow-gray.svg":"images/merchant/arrow-white.svg";return c.default.createElement("div",{className:"timingsHolder"},c.default.createElement(p.default,{className:"merchant-timings-dialog",open:this.state.openDialog,scroll:"paper",onClose:this.handleRequestClose,PaperProps:(0,u.isMobileDevice)()?{style:{width:"90%",padding:"16px",borderRadius:"8px"}}:{style:{width:"400px",padding:"24px",borderRadius:"10px"}}},c.default.createElement(d.DialogTitle,{style:{fontWeight:"700",fontSize:"24px",color:"rgba(0,0,0,.87)",padding:"0px 0px 16px 0px"}}," Opening Hours "),c.default.createElement("table",null,c.default.createElement("tbody",null,this.state.weeklyTimings)),c.default.createElement("img",{alt:"close icon",src:u.config.resourcepath+"images/close.svg",style:t,height:"24",width:"24",onClick:function(){return e.handleRequestClose()}})),"nearmepage"===window.pageName||"aroundyou"===window.pageName||"aroundyou_brands"===window.pageName||window.pageName.includes("merchantpage")?c.default.createElement("div",{className:a,onClick:function(t){return e.showTimings(t)}},this.state.timingStatus,c.default.createElement("img",{src:u.config.resourcepath+n,alt:"gray arrow",className:"showMoreArrow"})):c.default.createElement("div",null,"magicorderpage"!==window.pageName&&c.default.createElement("h3",{className:"merchant-sub-header"},"Timings"),c.default.createElement("span",{className:"merchant-sub-content",onClick:function(t){return e.showTimings(t)}},c.default.createElement("span",{className:"timing-status"},"Store Timings: "),this.state.timingRange,c.default.createElement("img",{alt:"gray arrow",className:"timings-arrow",src:u.config.resourcepath+"images/merchant/arrow-gray.svg"}))))}}]),t}(l.Component);t.default=f},614:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _stringify=__webpack_require__(54),_stringify2=_interopRequireDefault(_stringify),_getPrototypeOf=__webpack_require__(11),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(10),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(14),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(12),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(13),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactCookie=__webpack_require__(28),_reactCookie2=_interopRequireDefault(_reactCookie),_reactRedux=__webpack_require__(23),_helper=__webpack_require__(8),_login=__webpack_require__(43),_voucher=__webpack_require__(228),_search=__webpack_require__(36),_common=__webpack_require__(94),_LocationDialog=__webpack_require__(633),_LocationDialog2=_interopRequireDefault(_LocationDialog),_CircularProgress=__webpack_require__(49),_CircularProgress2=_interopRequireDefault(_CircularProgress),_PaymentOffers=__webpack_require__(634),_PaymentOffers2=_interopRequireDefault(_PaymentOffers);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}__webpack_require__(637);var MagicPayDialog=function(_Component){function MagicPayDialog(props){(0,_classCallCheck3.default)(this,MagicPayDialog);var _this=(0,_possibleConstructorReturn3.default)(this,(MagicPayDialog.__proto__||(0,_getPrototypeOf2.default)(MagicPayDialog)).call(this,props));_this.onWindowHeightUpdate=function(){clearTimeout(_this.windowResizeTimerRef),_this.windowResizeTimerRef=setTimeout((function(){_this.mountNode.style.setProperty("--vh",.01*window.innerHeight+"px")}),200)},_this.sendImpressionEvent=function(){var e=document.getElementById("magicpay-strip");e&&isInViewport(e)&&(sendEvent("web_"+window.pageName,"impression","magicpay_strip",(0,_helper.getEventExtras)()),window.removeEventListener("scroll",_this.sendImpressionEvent))},_this.handlePay=function(){_this.props.isLoggedIn?(_this.setState({disabled:!0}),_this.state.isUserLocated||_this.props.createCustomVoucher?(localStorage.removeItem("magicPayAmount"),_this.pay()):_this.props.openLocationDialog(!0)):(_this.state.amount&&localStorage.setItem("magicPayAmount",_this.state.amount),_this.props.openLoginDialog(!0,"magicpay-dialog",!1,btoa("CreateCustomVoucher")))},_this.pay=function(){if(ga("send","event","magicpay_amount",""+_this.state.payableAmount),0==_this.state.payableAmount)_this.props.magicPayUsingMP(_this.props.merchant_id,_this.state.amount,_this.props.userDetail.phone);else{if(window.location.href.includes("paydeal")){var e=(0,_helper.getQueryParamsFromUrl)();e=(0,_stringify2.default)(e),_this.props.magicPayUsingGateway(_this.props.merchant_id,_this.state.amount,_this.state.payableAmount,_this.props.userDetail,!0,_this.props.callback_url,e,_this.state.appliedCouponCode,_this.state.magicProSubscriptionId)}else _this.props.magicPayUsingGateway(_this.props.merchant_id,_this.state.amount,_this.state.payableAmount,_this.props.userDetail,!0,_this.props.callback_url,"",_this.state.appliedCouponCode,_this.state.magicProSubscriptionId)}},_this.handleOpen=function(){_this.setState({open:!0}),sendEvent("web_"+window.pageName,"click","magicpay_strip",(0,_helper.getEventExtras)()),ga("send","event","magicpay_landing","click"),loadScript("https://www.googletagmanager.com/gtag/js?id=AW-10999901866",(function(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","AW-10999901866"),e("event","conversion",{send_to:"AW-10999901866/L-D8CMfrjeYDEKrdlP0o"})})),_this.shareSocialContainerNode&&(_this.shareSocialContainerNode.style.display="none")},_this.handleClose=function(){_this.setState({open:!1}),_this.shareSocialContainerNode&&(_this.shareSocialContainerNode.style.display="block"),_this.props.handleClose&&_this.props.handleClose()},_this.handleAmount=function(e){parseInt(e)>1e5?_this.props.showSnackbarToast(!0,"Bill amount should not be more than 1,00,000."):parseInt(e)>0?_this.setState({amount:parseInt(e)},(function(){clearTimeout(_this.timeout),_this.timeout=setTimeout((function(){_this.props.isLoggedIn&&_this.getPaymentDivision()}),250)})):_this.setState({amount:null,payableAmount:0,totalmpAmount:0,magicpinAmount:0,pgAmount:0},(function(){_this.props.clearMagicpayPaymentDivision()}))},_this.openCouponDialog=function(){_this.props.isLoggedIn?_this.setState({applyCouponDialogOpen:!0},(function(){_this.couponInputField&&_this.couponInputField.focus&&_this.couponInputField.focus()})):_this.props.openLoginDialog(!0,"magicpay-dialog",!1,btoa("CreateCustomVoucher"))},_this.closeCouponDialog=function(){_this.setState({applyCouponDialogOpen:!1})},_this.requestCloseCouponDialog=function(e){e.target===e.currentTarget&&_this.closeCouponDialog()},_this.applyCouponCode=function(){_this.setState({validatingCoupon:!0,userCouponInfo:null},(function(){_this.getPaymentDivision(_this.state.couponCode).catch((function(e){_this.props.showSnackbarToast(!0,"Something went wrong! Please try later.")})).finally((function(){_this.setState({couponCode:"",validatingCoupon:!1})}))}))},_this.state={is_new_user:eval(_reactCookie2.default.load("is_new_user"))||!1,open:_this.props.open||!1,applyCouponDialogOpen:!1,amount:"",payableAmount:0,pgAmount:0,totalmpAmount:0,magicpinAmount:0,disabled:!1,openLocationPopup:!1,isUserLocated:!1,couponCode:"",appliedCouponCode:"",userCouponInfo:{},validatingCoupon:!1,removeMagicProAutoAdd:!1,magicProSubscriptionId:"",openMagicProDialog:!1,paymentOffers:Array.isArray(_this.props.payment_offers)?_this.props.payment_offers:[]},_this.timeout=null;var siteHeader=document.querySelector(".site-header");return _this.mountNode=document.createElement("div"),_this.backdropNode=document.createElement("div"),_this.backdropNode.style.display="none",_this.backdropNode.addEventListener("click",(function(e){_this.handleClose()})),_this.backdropNode.classList.add("magicpay-dialog-backdrop"),_this.mountNode.classList.add("magicpay-dialog-mount"),_this.mountNode.style.paddingTop=siteHeader?siteHeader.clientHeight+"px":"100px",document.body.append(_this.mountNode,_this.backdropNode),_this.windowResizeTimerRef=null,_this.shareSocialContainerNode=document.getElementById("share-social-container-floating"),_this.couponInputField=null,_this}return(0,_inherits3.default)(MagicPayDialog,_Component),(0,_createClass3.default)(MagicPayDialog,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowHeightUpdate)}},{key:"componentDidMount",value:function(){var e=this;if(window.addEventListener("resize",this.onWindowHeightUpdate),window.location.href.includes("open_magicpay")||(0,_helper.mountComponentOnLoad)("CreateCustomVoucher")){this.setState({open:!0});var t=window.location.href;t=(0,_helper.removeURLParameter)(t,"open_magicpay"),window.history.replaceState({},"title",t)}(0,_helper.isEmpty)(this.props.merchantData)||(sendEvent("web_"+window.pageName,"load","magicpay_strip",(0,_helper.getEventExtras)()),window.addEventListener("scroll",this.sendImpressionEvent));var a=this.props.magicpay_amount||localStorage.getItem("magicPayAmount");parseInt(a)>0&&this.setState({amount:a},(function(){e.props.isLoggedIn&&e.getPaymentDivision()})),this.sendImpressionEvent()}},{key:"componentWillReceiveProps",value:function(e){e.fetchingBalanceFailed&&(this.setState({open:!1}),this.props.showSnackbarToast(!0,"Unable to process magicpay. Refresh and retry."));var t=e.paymentDivisionResult;if(!(0,_helper.isEmpty)(t)){var a=!1,n="";(0,_helper.isEmpty)(t.userCouponInfo)||"SUCCESS"!==t.userCouponInfo.status||(a=!0,n=t.userCouponInfo.couponCode);var i=Array.isArray(t.payment_offers)?t.payment_offers:[];this.setState({magicpinAmount:t.magicpin_amount,pgAmount:t.pg_amount,totalmpAmount:t.magicpin_amount,payableAmount:t.pg_amount,userCouponInfo:t.userCouponInfo,appliedCouponCode:n,paymentOffers:i,applyCouponDialogOpen:!!this.state.applyCouponDialogOpen&&!a})}e.openLocDialog?this.setState({openLocationPopup:e.openLocDialog}):this.setState({openLocationPopup:!1}),e.isUserLocated&&this.setState({isUserLocated:e.isUserLocated,disabled:!1})}},{key:"componentDidUpdate",value:function(e,t){this.state.open||this.props.open?(document.body.style.overflow="hidden",this.mountNode.classList.add("open"),this.backdropNode.style.display="block"):(document.body.style.overflow="visible",this.mountNode.classList.remove("open"),this.backdropNode.style.display="none")}},{key:"getPaymentDivision",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(window.location.href.includes("paydeal")){var t=(0,_helper.getQueryParamsFromUrl)();return t=(0,_stringify2.default)(t),this.props.getPaymentDivisionMagicPay(this.props.merchant_id,this.state.amount,this.props.userDetail.phone,e||this.state.appliedCouponCode,t,this.state.magicProSubscriptionId,this.state.removeMagicProAutoAdd)}return this.props.getPaymentDivisionMagicPay(this.props.merchant_id,this.state.amount,this.props.userDetail.phone,e||this.state.appliedCouponCode,"",this.state.magicProSubscriptionId,this.state.removeMagicProAutoAdd)}},{key:"render",value:function(){var e=this,t=_helper.config.resourcepath+((0,_helper.isMobileDevice)()?"images/magic-payback.svg":"images/exit-bold.svg"),a=!this.state.amount&&this.props.isLoggedIn||this.state.disabled,n=parseFloat(this.props.magicpay_percent)>0?parseFloat(this.props.magicpay_percent):0,i=this.state.amount*n/100,o=this.state.amount?i>0?this.state.amount-i:this.state.amount:0,r=this.props.isLoggedIn?this.state.payableAmount:o,s=this.props.merchantData,l=void 0===s?{}:s;return _react2.default.createElement("div",{className:"magic-pay-popup"},"magicorderpage"===window.pageName?_react2.default.createElement("div",{className:"Cta",onClick:this.handleOpen},_react2.default.createElement("img",{className:"ctaIcon",src:_helper.config.resourcepath+"images/merchant/magicOrder/pay-icon.svg",alt:"magicpay"}),_react2.default.createElement("p",{className:"ctaText"}," Pay ")):this.props.customCTA?_react2.default.createElement("p",{className:"magic-pay-cta",onClick:this.handleOpen,dangerouslySetInnerHTML:(0,_helper.createMarkUp)(this.props.innerHTMLforCTA)}):this.props.createCustomVoucher?null:_react2.default.createElement("article",{id:"magicpay-strip",className:"magicpay-strip cta-strip",onClick:this.handleOpen},_react2.default.createElement("img",{alt:"magicorder",className:"magic-order-icon",src:_helper.config.resourcepath+"images/merchant/magic-pay-icon-new.svg"}),_react2.default.createElement("section",{className:"magicpay-details cta-details"},_react2.default.createElement("p",{className:"magicpay-heading"},"Pay your bill here"),_react2.default.createElement("input",{disabled:!0,type:"text",className:"paybill-textbox",placeholder:"Enter amount",readOnly:!0}),l.is_magicpay_available&&l.magicpay_percentage>0&&_react2.default.createElement("p",{className:"magicpay-offer"},_react2.default.createElement("span",{className:"magicpay-text"},"Save ",l.magicpay_percentage,"%"))),_react2.default.createElement("p",{className:"magic-pay-cta "+(l.enable_order_booking?"text":"button")}," Pay Bill ")),this.mountNode&&window.createReactPortal(_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("div",{className:"magic-pay-dialog"},_react2.default.createElement("div",{className:"header-holder"},this.props.isLoggedIn?null:_react2.default.createElement("div",{onClick:function(t){e.props.openLoginDialog(!0,"magicpay-earn-msg")},className:"login-offer"},_react2.default.createElement("p",{className:"message"},"Earn ₹",this.props.sign_up_bonus||500," worth magicPoints",_react2.default.createElement("img",{src:_helper.config.resourcepath+"images/shiny-magiccoin.svg",alt:""}),"on sign up")),_react2.default.createElement("div",{className:"header"},_react2.default.createElement("div",{className:"header-text"},_react2.default.createElement("p",{className:"m-name"},this.props.merchant.name||this.props.name),_react2.default.createElement("p",{className:"m-locality"},this.props.merchant.locality&&""+this.props.merchant.locality," ",this.props.merchant.city&&", "+this.props.merchant.city)),_react2.default.createElement("img",{alt:"close",className:"magicpay-close",src:t,onClick:this.handleClose}))),_react2.default.createElement("section",{className:"amount-container"},_react2.default.createElement("div",{className:"amount-section"},_react2.default.createElement("span",{className:"rupee-sign"},"₹"),_react2.default.createElement("input",{autoFocus:!0,type:"number",value:this.state.amount,className:"enter-amount",placeholder:"Amount",onChange:function(t){return e.handleAmount(t.target.value)}})),this.props.magicpay_partner_enabled&&_react2.default.createElement("div",{className:"createVoucherInfoHolder"},!!this.props.magicpay_partner_logo_white&&_react2.default.createElement("article",{className:"poweredBy"},_react2.default.createElement("p",{className:"poweredByText"}," Powered by: "),_react2.default.createElement("img",{className:"woohoo",src:this.props.magicpay_partner_logo_white,alt:""})))),_react2.default.createElement("section",{className:"payment-details-container"},_react2.default.createElement("div",{className:"apply-coupon-btn-holder"},this.state.appliedCouponCode?_react2.default.createElement("button",{style:{color:"#4DA940",backgroundColor:"#4DA94029",border:"1px dashed #4DA940"},onClick:this.openCouponDialog,className:"apply-coupon-btn"},this.state.appliedCouponCode):_react2.default.createElement("button",{onClick:this.openCouponDialog,className:"apply-coupon-btn"},"Apply coupon")),_react2.default.createElement("article",{className:"magicpayAmountHolder"},this.props.isLoggedIn&&this.state.magicpinAmount>0&&_react2.default.createElement("section",{className:"savingInfo"},_react2.default.createElement("p",{className:"savingPercent"}," Saving ",n,"%"),_react2.default.createElement("p",{className:"savingAmount"},"using",_react2.default.createElement("span",null,parseInt(this.state.magicpinAmount),_react2.default.createElement("img",{className:"coin",src:_helper.config.resourcepath+"images/shiny-magiccoin.svg",alt:"coin"})))),!this.props.isLoggedIn&&i>0&&_react2.default.createElement("section",{className:"savingInfo"},_react2.default.createElement("p",{className:"savingPercent"}," Save upto ",n,"%"),_react2.default.createElement("p",{className:"savingAmount"},"using",_react2.default.createElement("span",null,parseInt(i),_react2.default.createElement("img",{className:"coin",src:_helper.config.resourcepath+"images/shiny-magiccoin.svg",alt:"coin"})))),_react2.default.createElement("button",{className:"pay-btn",onClick:this.handlePay,disabled:a},this.props.isLoggedIn?"Pay ₹"+(parseInt(r)>0?parseInt(r):" --"):"Login & Pay "+(parseInt(r)>0?"₹"+parseInt(r):""))))),_react2.default.createElement("div",{onClick:this.requestCloseCouponDialog,className:"apply-coupon-dialog-holder"+(this.state.applyCouponDialogOpen?" open":"")},_react2.default.createElement("div",{className:"apply-coupon-dialog"},this.state.validatingCoupon?_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("p",{style:{textAlign:"center"},className:"apply-coupon-heading"},"Validating ",_react2.default.createElement("code",null,this.state.couponCode)),_react2.default.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"12px"}},_react2.default.createElement(_CircularProgress2.default,{size:60}))):_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("p",{className:"apply-coupon-heading"},"Add coupon for extra savings!"),_react2.default.createElement("div",{className:"apply-coupon-input"},_react2.default.createElement("input",{ref:function(t){e.couponInputField=t},placeholder:"Enter code",value:this.state.couponCode||this.state.appliedCouponCode,onChange:function(t){e.setState({couponCode:t.target.value.toUpperCase()})},type:"text",name:"couponCode",id:"couponCode"}),this.state.userCouponInfo&&"FAILURE"===this.state.userCouponInfo.status&&_react2.default.createElement("p",{className:"apply-coupon-error"},_react2.default.createElement("code",null,this.state.userCouponInfo.couponCode),":",this.state.userCouponInfo.message||"Invalid coupon code")),_react2.default.createElement("button",{onClick:this.applyCouponCode,className:"apply-coupon-cta"},"Apply"))))),this.mountNode),this.state.openLocationPopup&&_react2.default.createElement(_LocationDialog2.default,{openDialog:this.state.openLocationPopup,pay:this.pay}))}}]),MagicPayDialog}(_react.Component);exports.default=(0,_reactRedux.connect)((function(e){return{walletData:e.login.walletData,paymentDivisionResult:e.voucher.magicpayPaymentDivisionResult,couponInfo:e.voucher.couponInfo,success:e.voucher.success,paymentMagicpayMPResult:e.voucher.paymentMagicpayMPResult,isUserLocated:e.search.isUserLocated,openLocDialog:e.search.openLocationDialog,isLoggedIn:e.login.isLoggedIn,userDetail:e.login.userDetail,fetchingBalance:e.login.fetchingBalance,fetchingBalanceFailed:e.login.fetchingBalanceFailed,authToken:e.login.authToken}}),{openLoginDialog:_login.openLoginDialog,getPaymentDivisionMagicPay:_voucher.getPaymentDivisionMagicPay,magicPayUsingMP:_voucher.magicPayUsingMP,magicPayUsingGateway:_voucher.magicPayUsingGateway,openLocationDialog:_search.openLocationDialog,clearMagicpayPaymentDivision:_voucher.clearMagicpayPaymentDivision,showSnackbarToast:_common.showSnackbarToast})(MagicPayDialog)},633:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(11)),i=h(a(10)),o=h(a(14)),r=h(a(12)),s=h(a(13)),l=a(0),c=h(l),p=a(23),d=h(a(53)),u=h(a(216)),m=a(8),g=a(36);function h(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){(0,i.default)(this,t);var a=(0,r.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.detectUserLocation=function(){(0,m.getUserLatLon)().then((function(e){a.props.initLocation(!1);a.props.pay(),a.handleClose()})).catch((function(e){console.log(e),a.setState({openSnackBar:!0,message:"Unable to fetch location. Refresh and retry."})}))},a.handleClose=function(){a.setState({openDialog:!1}),a.props.openLocationDialog(!1)},a.state={openDialog:!!e.openDialog,openSnackBar:!1},a}return(0,s.default)(t,e),(0,o.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog})}},{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement(d.default,{open:this.state.openDialog,onClose:this.handleClose,className:"location-dialog",PaperProps:{style:{width:"90%",maxWidth:"300px",margin:"0 auto",borderRadius:"8px",padding:"16px"}}},c.default.createElement("div",null,c.default.createElement("p",{style:{padding:"4px",color:"rgba(0, 0, 0, 0.87)",fontSize:"18px",textAlign:"center",marginBottom:"16px"}},"We need to verify your location for a seamless magicpay experience. Please select yes to continue."),c.default.createElement("button",{style:{padding:"10px 12px ",backgroundColor:"#338aed",color:"white",marginLeft:"70px",border:"none",borderRadius:"10px"},onClick:this.detectUserLocation},"YES"),c.default.createElement("button",{style:{padding:"10px 14px",backgroundColor:"#338aed",color:"white",float:"right",marginRight:"70px",border:"none",borderRadius:"10px"},onClick:this.handleClose},"NO"))),this.state.openSnackBar&&c.default.createElement(u.default,{open:this.state.openSnackBar,message:this.state.message}))}}]),t}(l.Component);t.default=(0,p.connect)((function(e){return{openDialog:e.search.openLocationDialog}}),{openLocationDialog:g.openLocationDialog,initLocation:g.initLocation})(f)},634:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(70));t.default=function(e){var t=e.paymentOffers,a=(0,o.useState)(!1),s=(0,n.default)(a,2),l=s[0],c=s[1],p=(0,o.useState)(null),d=(0,n.default)(p,2),u=d[0],m=d[1];return(0,o.useEffect)((function(){Array.isArray(u)&&u.length>0&&u.some((function(e){return e&&"POINTS"===e.type}))&&c(!0)}),[u]),Array.isArray(t)&&0!=t.length?r.default.createElement("div",{className:"widget-payment-offers-container"},t.map((function(e){return r.default.createElement("div",{onClick:function(){m(e.tnc)},className:"payment-offer"},e.image&&r.default.createElement("img",{src:e.image,alt:"",className:"offer-image"}),r.default.createElement("span",{className:"offer-text",dangerouslySetInnerHTML:{__html:e.description}}))})),r.default.createElement(i.default,{open:l,onClose:function(){c(!1)}},Array.isArray(u)&&u.map((function(e){return r.default.createElement(r.default.Fragment,null,e.heading&&r.default.createElement("p",{className:"heading",dangerouslySetInnerHTML:{__html:e.heading}}),e.header&&r.default.createElement("p",{className:"header",dangerouslySetInnerHTML:{__html:e.header}}))})))):null};var i=s(a(53)),o=a(0),r=s(o);function s(e){return e&&e.__esModule?e:{default:e}}a(635)},635:function(e,t,a){var n=a(25),i=a(636);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},r=(n(i,o),i.locals?i.locals:{});e.exports=r},636:function(e,t,a){(t=a(26)(!1)).push([e.i,".widget-payment-offers-container {\n    display: flex;\n    width: 100%;\n    max-width: 100%;\n    overflow-x: scroll;\n    gap: 8px;\n    scroll-behavior: smooth;\n    padding: 0px 16px;\n    margin: 6px 0px 8px;\n    cursor: pointer;\n}\n\n.widget-payment-offers-container .payment-offer {\n    display: flex;\n    align-items: center;\n    width: 256px;\n    min-width: 256px;\n    padding: 12px;\n    color: #333;\n    border: 1px solid #E8E8E8;\n    border-radius: 12px;\n}\n\n.payment-offer .offer-image {\n    height: 1.2em;\n    width: 1.2em;\n    margin-right: 4px;\n    border-radius: 0.4em;\n}\n\n.payment-offer .offer-text {\n    font-size: 10px;\n    line-height: 12px;\n}\n\n.offer-text > b {\n    font-weight: 600;\n}",""]),e.exports=t},637:function(e,t,a){var n=a(25),i=a(638);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},r=(n(i,o),i.locals?i.locals:{});e.exports=r},638:function(e,t,a){(t=a(26)(!1)).push([e.i,".magicpay-strip .magic-pay-cta {\n\tfloat: right;\n\tpadding: 10px 12px;\n\tbackground-color: #7e57c2;\n\tcolor: white;\n\tfont-size: 12px;\n\tfont-weight: bold;\n\tborder-radius: 4px;\n\tcursor: pointer;\n}\n\n.magicpay-strip .magicpay-details {\n\tpadding-top: 0;\n}\n\n.magicpay-dialog-mount {\n\t--vh: 1vh;\n\tposition: fixed;\n\toverflow: hidden;\n\theight: 100vh;\n\theight: calc(var(--vh, 1vh) * 100);\n\tmax-height: 100vh;\n\tmax-height: calc(var(--vh, 1vh) * 100);\n\tz-index: 9;\n\twidth: 385px;\n\ttop: 0px;\n\tright: -200%;\n\tbackground: #FFFFFF;\n\tbox-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n\ttransition: right .2s;\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.magicpay-dialog-mount.open {\n\tright: 0%;\n}\n\n.magicpay-dialog-backdrop {\n\twidth: 100vw;\n\theight: 100vh;\n\tposition: fixed;\n\tbackground-color: rgba(0,0,0,.12);\n\tleft: 0px;\n\ttop: 0px;\n\tz-index: 8;\n}\n\n.magic-pay-dialog {\n\tposition: relative;\n\tflex-basis: 100%;\n\tmin-height: 0;\n\tbackground-color: #6561E8;\n\tdisplay: flex;\n\tflex-direction: column;\n\tisolation: isolate;\n\toverflow-y: scroll;\n\toverflow-x: hidden;\n}\n\n.magic-pay-dialog .header-holder {\n\tdisplay: flex;\n\tflex-direction: column-reverse;\n}\n\n.header-holder .header {\n\tposition: relative;\n\tpadding: 16px 24px;\n\tbackground: #fff;\n\tdisplay: flex;\n\tgap: 16px;\n\tjustify-content: space-between;\n\talign-items: center;\n\tposition: sticky;\n\ttop: 0px;\n\tz-index: 1;\n}\n\n.header .magicpay-close {\n\theight: 1.5em;\n}\n\n.header-holder .login-offer {\n\twidth: 100%;\n\tbackground: linear-gradient(90deg, #C84E89 0%, #F15F79 100%);\n\tbox-shadow: 0px 4px 4px rgba(0, 0, 0, 0.15);\n\tpadding: 20px 16px;\n\tposition: relative;\n\tcolor: white;\n\tfont-weight: 600;\n\tfont-size: 16px;\n\tline-height: 20px;\n\tcursor: pointer;\n}\n\n.login-offer::after {\n\tcontent: '';\n\twidth: 137px;\n\theight: 137px;\n\tborder-radius: 100%;\n\tbackground: url('http://lh3.googleusercontent.com/ZdrLx1oZTveKJSM9xvmIq0nork06Tz2av990OpDTtTprglNro5OX7Amep9QGqTW10dDpDKgGXiURLIoDsJlpz4LmVwSHSCR3NlnBsFN1=w120') center/50% no-repeat, linear-gradient(180deg, rgba(252, 206, 191, 0.5) 0%, rgba(252, 206, 191, 0) 62.73%);\n\tmix-blend-mode: normal;\n\tposition: absolute;\n\tright: -7%;\n\ttop: -30%;\n}\n\n.login-offer .message {\n\twidth: 60%;\n}\n\n.login-offer .message > img {\n\theight: 1.2em;\n\tvertical-align: text-bottom;\n}\n\n.header .header-text {\n\t\n}\n\n.header-text > .m-name {\n\tfont-size: 16px;\n\tline-height: 20px;\n\tcolor: #333;\n\tfont-weight: 600;\n\twhite-space: nowrap;\n\toverflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    -webkit-box-orient: vertical;\n}\n\n.header-text > .m-locality {\n\tfont-size: 12px;\n\tline-height: 16px;\n\tcolor: #333;\n\topacity: 0.7;\n\tfont-weight: 500;\n\twhite-space: nowrap;\n\toverflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    -webkit-box-orient: vertical;\n}\n\n.magic-pay-dialog .amount-container {\n\tposition: relative;\n\tflex-basis: 100%;\n\tmin-height: 300px;\n\tpadding: 0;\n\tbackground: url('https://static.magicpin.com/samara/static/images/merchant/magicpay-voucher-illustration.svg');\n\tbackground-repeat: no-repeat;\n\tbackground-position: center;\n}\n\n\n.amount-container .amount-section {\n\tposition: relative;\n\tpadding: 8px;\n\tmargin: 0 auto;\n\tmargin-top: 40px;\n\toverflow: hidden;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.amount-section .rupee-sign {\n\tcolor: white;\n\tmargin-right: 4px;\n\tfont-size: 24px;\n\tposition: relative;\n\ttop: -2px;\n\tfont-weight: bold;\n}\n\n.amount-section .enter-amount {\n\tcolor: white;\n\tcaret-color: white;\n\tfont-size: 28px;\n\tbackground-color: #6561E8;\n\tborder: none;\n\tmargin-left: 0;\n\tpadding: 0;\n\tfont-weight: 600;\n\twidth: 7ch;\n}\n\n.enter-amount::placeholder {\n\tcolor: rgba(255, 255, 255, 0.38);\n}\n\n.enter-amount:-ms-input-placeholder {\n\tcolor: rgba(255, 255, 255, 0.38);\n}\n\n.enter-amount::-ms-input-placeholder {\n\tcolor: rgba(255, 255, 255, 0.38);\n}\n\n.magic-pay-dialog .payment-details-container {\n\twidth: 100%;\n\tbackground-color: white;\n\tpadding: 16px 0px 0px;\n\tborder-radius: 24px;\n\tborder-bottom-left-radius: 0;\n\tborder-bottom-right-radius: 0;\n\tposition: sticky;\n\tbottom: 0px;\n\tz-index: 1;\n}\n\n.payment-details-container .magicpay-points {\n\tposition: relative;   \n\tdisplay: grid;\n\tgrid-template-columns: auto 1fr auto;\n\talign-items: center;\n}\n\n.magicpay-points .check-points {\n\tbackground-color: #ef1c74;\n\tcolor: white;\n\tfloat: none;\n\tposition: relative;\n\theight: 20px;\n\ttop: auto;\n\twidth: 18px;\n\tcursor: pointer;\n}\n\n.magicpay-points .save-points {\n\tposition: relative;\n\tleft: auto;\n\tcolor: black;\n\tfont-size: 12px;\n\tline-height: 16px;\n\tmargin-left: 8px;\n\ttop: auto;\n}\n\n.magicpay-points .total-amount {\n\tcolor: #00acb7;\n\tfont-size: 12px;\n\tfloat: none;\n\tmargin-top: 0;\n}\n\n.magicpay-points .left-points {\n\tposition: absolute;\n\tfont-size: 10px;\n\tcolor: #8c8e94;\n\ttop: 18px;\n\tleft: 32px;\n\tline-height: 1.43;\n}\n\n.payment-details-container .coupon-value {\n\tborder: 0.5px solid #d8dae1;\n\tborder-radius: 4px;\n\tfont-size: 14px;\n\tcolor: rgba(0, 0, 0, 0.54);\n\tpadding: 8px;\n\ttext-align: left;   \n\tmargin-top: 60px;\n\tdisplay: none;\n}\n\n.payment-details-container .coupon-apply {\n\tbackground-color:  #7e57c2;\n\tcolor: white;\n\tborder: none;\n\tpadding: 8px 18px;\n\ttext-align: center;\n\tfloat: right;\n\tmargin-top: 60px;\n\tfont-size: 14px;\n\tfont-weight: bold;\n\tborder-radius: 4px;\n\tdisplay: none;\n}\n\n.magicpay-details .save-points-text {\n\tfont-size: 13px;\n\tfont-weight: 500;\n\tcolor: #7e57c2;\n\tdisplay: inline-block;\n\tmargin-left: 0;\n}\n\n.magicpay-strip .save-points-image {\n\theight: 16px;\n\twidth: 16px;\n\tvertical-align: middle;\n\tmargin-left: 4px;\n}\n\n.magicpay-strip .magicpay-btn {\n\tdisplay: inline-block;\n}\n\n.magicpay-strip .magic-pay-cta {\n    float: none;\n    padding: 10px 12px;\n    color: white;\n    font-size: 12px;\n    font-weight: bold;\n    border-radius: 4px;\n    cursor: pointer;\n    position: relative;\n    background: linear-gradient(46.38deg, #6D6BED 20.46%, #8F8BF2 52.47%, #DBD0FE 110.16%);\n    box-shadow: 0px 3px 0px #8e8cfe;\n    padding: 6px 12px;\n    align-self: center;\n}\n\n.total-amount span {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tmargin-right: 4px;\n}\n\n.total-amount .coinIcon {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\twidth: 12px;\n}\n\n.amount-container .createVoucherInfoHolder {\n\tmargin-top: 40px;\n}\n\n.createVoucherInfoHolder .createVoucherInfo {\n\tcolor: #fff;\n\tfont-size: 12px;\n\tline-height: 16px;\n\twidth: 80%;\n\ttext-align: center;\n\tmargin: 0 auto;\n}\n\n.createVoucherInfoHolder .poweredBy {\n\tmargin-top: 20px;\n\tfont-size: 12px;\n\ttext-align: center;\n\tcolor: #fff;\n}\n\n.createVoucherInfo .name {\n\tfont-weight: bold;\n}\n\n.poweredBy .poweredByText {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n}\n\n.poweredBy .woohoo {\n\theight: 2em;\n\tvertical-align: middle;\n\tmargin-left: 4px;\n}\n\n.payment-details-container .apply-coupon-btn-holder {\n\tpadding: 0px 16px;\n}\n\n.apply-coupon-btn-holder .apply-coupon-btn {\n\tborder: none;\n\tpadding: 8px;\n\tfont-size: 14px;\n\tline-height: 18px;\n\tcolor: #a0a0a0;\n\tfont-weight: 600;\n\tbackground: white;\n\ttransition: background 200ms;\n}\n\n.payment-details-container .apply-coupon-btn:hover,\n.payment-details-container .apply-coupon-btn:active {\n\tbackground-color: #E8E8E8;\n}\n\n.payment-details-container .paymentSeperator {\n\tmargin: 0 -24px;\n\tborder: 0;\n\tborder-top: 1px solid rgba(0,0,0,.12);\n\tmargin-top: 12px;\n}\n\n.payment-details-container .magicpayAmountHolder {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tmargin-top: 8px;\n\tpadding: 16px 16px 26px;\n\talign-items: center;\n\tgap: 16px;\n\tbackground: #FFFFFF;\n\tbox-shadow: 0px 0px 30px rgba(212, 215, 224, 0.4);\n\tbackdrop-filter: blur(13.5914px);\n\tborder-radius: 24px;\n}\n\n.magicpayAmountHolder .pay-btn {\n\tcolor: white;\n\tborder: none;\n\tfont-size: 16px;\n\tline-height: 20px;\n\tfont-weight: 700;\n\tflex-basis: 100%;\n\tmin-width: 0px;\n\tcursor: pointer;\n\tpadding: 10px;\n\tbackground: linear-gradient(46.38deg, #6D6BED 20.46%, #8F8BF2 52.47%, #DBD0FE 110.16%);\n\tbox-shadow: 0px 3px 0px #8E8CFE;\n\tborder-radius: 8px;\n}\n\n.pay-btn:disabled,\n.pay-btn.disabled {\n\tcursor: not-allowed;\n\tbackground: #f6f7f9;\n\tcolor: #979797;\n\tbackground: #E8E8E8;\n\tbox-shadow: 0px 3px 0px #979797;\n\tborder-radius: 8px;\n}\n\n.magicpayAmountHolder .savingInfo {\n\tflex-basis: 40%;\n}\n\n.savingInfo .savingPercent,\n.savingInfo .savingAmount {\n\tfont-size: 12px;\n\tline-height: 16px;\n\tfont-weight: 500;\n\tcolor: #a0a0a0;\n}\n\n.savingInfo .savingAmount {\n\tdisplay: flex;\n}\n\n.savingAmount span {\n\tdisplay: flex;\n\talign-items: center;\n\tcolor: #4DA940;\n\tmargin-left: 4px;\n}\n\n.savingAmount span > img.coin {\n\theight: 1em;\n}\n\n.magicpay-dialog-mount .apply-coupon-dialog-holder {\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: flex-end;\n\tposition: absolute;\n\tleft: 0px;\n\ttop: 200%;\n\tbackground-color: rgba(0,0,0,.12);\n\topacity: 0;\n\tz-index: 2;\n\ttransition: all 200ms;\n}\n\n.apply-coupon-dialog-holder.open {\n\ttop: 0px;\n\topacity: 1;\n\ttransition: all 200ms;\n}\n\n.apply-coupon-dialog-holder .apply-coupon-dialog {\n\twidth: 100%;\n\tpadding: 16px 16px 26px;\n\tbackground-color: white;\n\tborder-radius: 24px;\n\tborder-bottom-left-radius: 0px;\n\tborder-bottom-right-radius: 0px;\n}\n\n.apply-coupon-dialog .apply-coupon-heading {\n\tfont-size: 18px;\n\tline-height: 22px;\n\tcolor: #333;\n\tfont-weight: 600;\n}\n\n.apply-coupon-dialog .apply-coupon-input {\n\tmargin: 10px 0px;\n}\n\n.apply-coupon-input #couponCode {\n\twidth: 100%;\n\tcaret-color: #6561E8;\n\tpadding: 12px 10px;\n\tborder: 1px solid #E8E8E8;\n\tborder-radius: 12px;\n\tfont-size: 14px;\n\tline-height: 18px;\n\tcolor: #333;\n\tfont-weight: 600;\n\tmargin-bottom: 4px;\n}\n\n.apply-coupon-input > input::-ms-input-placeholder {\n\tcolor: #a0a0a0;\n}\n\n.apply-coupon-input > input::-webkit-input-placeholder {\n\tcolor: #a0a0a0;\n}\n\n.apply-coupon-input > input::placeholder {\n\tcolor: #a0a0a0;\n}\n\n.apply-coupon-input .apply-coupon-error {\n\tfont-size: 14px;\n\tline-height: 14px;\n\tcolor: rgba(237, 20, 61, 0.8);\n\tmargin-top: 6px;\n}\n\n.apply-coupon-error > code {\n\tbackground-color: rgba(237, 20, 61, 0.12);\n\tpadding: 4px 6px;\n}\n\n.apply-coupon-dialog > .apply-coupon-cta {\n\twidth: 100%;\n\tbackground: linear-gradient(46.38deg, #6D6BED 20.46%, #8F8BF2 52.47%, #DBD0FE 110.16%);\n\tbox-shadow: 0px 3px 0px #8E8CFE;\n\tborder-radius: 8px;\n\tpadding: 10px 0px;\n\tborder: none;\n\ttext-align: center;\n\tfont-size: 16px;\n\tline-height: 20px;\n\tcolor: #fff;\n\tfont-weight: 600;\n}\n\n.magic-pay-cta.button{\n\tcolor: #fff;\n\tpadding: 8px;\n\twidth: 90px;\n\tbackground: #821dff;\n\tmargin-left: auto;\n\ttext-align: center;\n}\n\n.magic-pay-cta.text{\n\tfont-weight: 600;\n\tfont-size: 12px;\n}\n\n@media(max-width: 800px) {\n\t.magicpay-dialog-mount.open {\n\t\twidth: 100%;\n\t}\n\n\t.magic-pay-dialog .amount-container {\n\t\tbackground-position: center;\n\t}\n\n\t.payment-details-container .pay-btn {\n\t\tmargin-top: 0;\n\t}\n\n\t.createVoucherInfoHolder .createVoucherInfo {\n\t\twidth: 70%;\n\t}\n\n\t.header-text > .m-name,\n\t.header-text > .m-locality {\n\t\tcolor: white;\n\t}\n\n\t.magic-pay-dialog .header-holder {\n\t\tflex-direction: column;\n\t}\n\n\t.magic-pay-dialog .header {\n\t\tflex-direction: row-reverse;\n\t\tjustify-content: flex-end;\n\t\tbackground-color: #6561E8;\n\t\tgap: 8px;\n\t}\n\n\t.header .magicpay-close {\n\t\theight: 2em;\n\t}\n\n\t.magic-pay-dialog .payment-details-container {\n\t\twidth: 100%;\n\t}\n\n\t.amount-container .header {\n\t\tbackground: transparent;\n\t\tpadding: 0;\n\t}\n}",""]),e.exports=t},663:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a(105)),i=y(a(11)),o=y(a(10)),r=y(a(14)),s=y(a(12)),l=y(a(13)),c=a(0),p=y(c),d=a(23),u=y(a(53)),m=a(125),g=a(43),h=a(8),f=a(29),_=a(582);function y(e){return e&&e.__esModule?e:{default:e}}var v=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],x=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b=function(e){function t(e){(0,o.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));w.call(a);var n=a.props.timings.map((function(e,t){return{day:e.day,slot:e.time_slots.map((function(e){var t=a.getTimingText(e.opentime,e.closetime),n=(new Date,(0,h.getTimingStatus)(e.opentime,e.closetime));return n!=f.CLOSED_ALL_DAY&&n!=f.OPEN_ALL_DAY||(t=n),[n,t]}))}})),r=(0,h.getOpenTimings)(n);return a.state={tableAvailable:!1,open:!1,numberOfPeople:1,timeStamp:null,dateIndex:0,timeSlots:n,timeIndex:0,timingStatus:r,todaysTimings:(0,h.getDaysTimings)(a.props.timings)||{},bookingHours:""},a.firstSlot=null,a}return(0,l.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){new Date;this.state.timingStatus===f.OPEN_NOW&&this.setState({tableAvailable:!0});var e=24-(new Date).getHours();this.setState({bookingHours:24+e})}},{key:"render",value:function(){var e=this,t=this.getNextFifteenDays(),a=this.getDaySlots(this.state.dateIndex),i=(this.props.category_id,this.props.category_id,this.props.category_id,{color:"rgba(0,0,0,0.87)",textAlign:"center",paddingBottom:"16px"}),o={display:"inline-block",margin:"0 12px",cursor:"pointer",textAlign:"center"},r={background:"#fff",borderRadius:"20px",color:"rgba(0,0,0,0.54)",padding:"8px 16px"},s={borderRadius:"20px",color:"white",background:"rgb(81, 177, 68)",padding:"8px 16px"},l={marginTop:"8px",color:"rgba(0,0,0,0.54)",textAlign:"center",fontSize:"14px"},c={borderRadius:"50%",padding:"8px 12px",color:"rgba(0,0,0,0.54)",background:"#fff"},d={borderRadius:"50%",padding:"8px 12px",color:"white",background:"rgb(81, 177, 68)"},m={width:"90%",margin:"16px auto",border:"0.5px solid rgba(0,0,0,0.12)"},g={bottom:"0",left:"0",background:"#338aed",padding:"10px 12px",color:"#fff",width:"100%"},f={bottom:"0",left:"0",background:"gray",padding:"10px 12px",color:"#fff",width:"100%"},y={width:"100%",color:"#fff",padding:"12px 0",display:"inline-block",border:"none",background:"transparent",fontSize:"16px",fontWeight:"500",cursor:"pointer"},v={width:"100%",color:"#fff",padding:"12px 0",display:"inline-block",border:"none",background:"transparent",fontSize:"16px",fontWeight:"500",cursor:"pointer"},x={display:"grid",gridTemplateColumns:"1fr 1fr 1fr",margin:"0 10px",gap:"10px"};return this.state.tableAvailable?p.default.createElement("div",{style:{display:"inherit"}},((0,h.isMobileDevice)(),p.default.createElement("div",{onClick:this.handleOpen,id:"voucher-strip",className:"voucher-strip cta-strip"},p.default.createElement("img",{height:"28",width:"28",alt:"buy voucher icon",className:"buy-vouchers-icon reserve-table",src:h.config.resourcepath+"images/merchant/reserve-table.svg"}),p.default.createElement("article",{className:"voucher-strip-details cta-details"},"Reserve a table"),p.default.createElement("p",{className:"reserve-table-cta"},"Reserve Now"))),p.default.createElement(u.default,{open:this.state.open,onClose:this.handleClose,fullScreen:(0,h.isMobileDevice)(),scroll:"paper"},p.default.createElement("img",{src:h.config.resourcepath+"images/close-black.svg",className:"show-mb",style:{position:"absolute",top:"16px",right:"16px",transform:"rotate(180deg)",width:"24px"},onClick:this.handleClose}),p.default.createElement("img",{src:h.config.resourcepath+"images/close-black.svg",className:"hide-mb",style:{position:"absolute",top:"16px",right:"10px",width:"24px",cursor:"pointer"},onClick:this.handleClose}),this.props.bookingDeal?p.default.createElement("div",{className:"booking-container"},1===this.props.category_id?p.default.createElement("div",{className:"booking-container-details"},p.default.createElement("div",null,p.default.createElement("h3",{style:{color:"rgba(0,0,0,0.87)",fontSize:"24px",padding:"16px 20px"}},"Help us book you a table"),p.default.createElement("p",{style:{fontSize:"16px",color:"rgba(0,0,0,0.54)",padding:"0 20px",lineHeight:"1.5"}}," We’ll contact this restaurant and confirm your booking. ")),p.default.createElement("div",{style:window.innerHeight<600?{background:"#f2f3f4",marginTop:"16px",overflow:"auto",height:"360px",padding:"24px 0"}:{background:"#f2f3f4",marginTop:"16px",padding:"24px 0"}},p.default.createElement("p",{style:i},"When are you going out?"),p.default.createElement("div",{style:x,className:"date-holder"},t.map((function(t,a){return p.default.createElement("span",{key:a,style:o,onClick:function(){e.handleTime(e.firstSlot,a,null)}},p.default.createElement("p",{style:e.state.dateIndex==a?s:r}," ",t.date.getDate()+" "+t.month," "),p.default.createElement("p",{style:l}," ",t.day," "))}))),p.default.createElement("hr",{style:m}),p.default.createElement("p",{style:i},a.length>0?"What time?":"Sorry! The booking is closed for today."),p.default.createElement("div",{style:x,className:"date-holder"},a.map((function(t,a){return p.default.createElement("span",{onClick:function(){e.handleTime(t.getTime(),e.state.dateIndex,a)},key:a,style:o},p.default.createElement("p",{style:e.state.timeIndex==a?s:r}," ",(0,h.getReadableTime)(t)," "))}))),p.default.createElement("hr",{style:m}),p.default.createElement("p",{style:i},"How many folks?"),p.default.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",margin:"0 10px",gap:"10px",marginBottom:"60px"},className:"date-holder"},[].concat((0,n.default)(Array(15).keys())).map((function(t){return p.default.createElement("span",{key:t,style:o,onClick:function(){e.handlePeopleCount(t+1)}},p.default.createElement("p",{style:e.state.numberOfPeople==t+1?d:c}," ",t+1," "))}))))):p.default.createElement("div",null,p.default.createElement("div",{className:"merchant-info"},p.default.createElement("img",{className:"merchant-photo",src:this.props.profile_pic}),p.default.createElement("p",{className:"merchant-name"},this.props.name),p.default.createElement("p",null,this.props.merchant.locality,",",this.props.merchant.city)),p.default.createElement("div",{className:"book-deal"},p.default.createElement("p",{className:"max-cashback"},this.props.deal.cashback_percent,"% cashback ",p.default.createElement("span",{className:"cashback-upto"},", upto ₹",this.props.deal.max_cashback)),p.default.createElement("p",{className:"hour-details"},"Book between 11AM - 1PM and 4PM -6PM to get highest cashbacks.Auto applies if you visit the outlet between ",this.state.bookingHours," hours."))),(0,h.isMobileDevice)()?p.default.createElement("div",{style:this.areDetailsValid()?g:f},this.areDetailsValid()?p.default.createElement("button",{style:y,onClick:this.handleBooking}," CONFIRM BOOKING "):p.default.createElement("button",{style:v,onClick:this.handleBooking}," CONFIRM BOOKING ")):p.default.createElement(_.DialogActions,{style:{padding:0}},p.default.createElement("div",{style:this.areDetailsValid()?g:f},this.areDetailsValid()?p.default.createElement("button",{style:y,onClick:this.handleBooking}," CONFIRM BOOKING "):p.default.createElement("button",{style:v,onClick:this.handleBooking}," CONFIRM BOOKING ")))):p.default.createElement("div",{style:{textAlign:"center",display:"block",margin:"11% auto"}},p.default.createElement("h3",{style:{fontSize:"18px",color:"rgba(0,0,0,0.87)",fontWeight:"bold",padding:"8px"}},this.props.bookDealError?"There was some error while booking!":"Cheers! Booking Request Sent"),p.default.createElement("div",{className:"booking-message"},this.getMsgEmoticon()),!this.props.bookDealError&&p.default.createElement("p",{style:{color:"rgba(0,0,0,0.54)",padding:"8px"}}," You will receive a confirmation message and e-mail as soon as restaurant confirms your booking."),p.default.createElement("button",{style:{padding:"8px 40px",background:"rgb(51, 138, 237)",border:"none",borderRadius:"4px",color:"#fff",fontWeight:"bold",cursor:"pointer",marginTop:"8px"},onClick:this.handleClose},this.props.bookDealError?"Try Again":"Ok")))):p.default.createElement("div",null,(0,h.isMobileDevice)()?p.default.createElement("div",null,"Booking closed"):"")}}]),t}(c.Component),w=function(){var e=this;this.getTimingText=function(e,t){return e+"-"+t},this.handleOpen=function(){mixpanel.track("merchant-links",{page_name:window.pageName,"mp-data-type":"book-table-click"}),e.props.isLoggedIn?(sendEvent("web_"+window.pageName,"click_book_deal_btn","open_dialog"),e.setState({open:!0})):(sendEvent("web_"+window.pageName,"click_book_deal_btn","open_login"),e.props.openLoginDialog(!0,"book_table"))},this.handleClose=function(){e.props.bookDealError&&window.location.reload(),e.setState({open:!1})},this.handlePeopleCount=function(t){t=t||1,e.setState({numberOfPeople:t})},this.handleTime=function(t,a,n){e.setState({timeStamp:t,dateIndex:a,timeIndex:n})},this.getNextFifteenDays=function(){for(var t=[],a=e.state.todaysTimings.openTime,n=0;n<15;n++){var i=(0,h.addDays)(a,n),o=v[i.getMonth()],r=x[i.getDay()];e.state.timeSlots[(0,h.getWeekDay)(i.getDay())].slot[0][0]!==f.CLOSED_ALL_DAY&&t.push({date:i,month:o,day:r})}return t},this.getDaySlots=function(t){t=t||0;for(var a=[],n=new Date,i=e.state.timeSlots[(0,h.getWeekDay)((n.getDay()+t)%7)].slot,o=0;o<i.length;o++)if(i[o][0]===f.OPEN_NOW||i[o][0]===f.OPEN_ALL_DAY){if(i[o][0]===f.OPEN_ALL_DAY)var r=(0,h.getDate)("00:00:00",!1,t%7),s=(0,h.getDate)("23:59:59",!0,t%7);else r=(0,h.getDate)(i[o][1].split("-")[0],!1,t%7),s=(0,h.getDate)(i[o][1].split("-")[1],!0,t%7);break}var l=void 0;(l=r>n?r:n).getMinutes()<30?(l.setHours(l.getHours()+1),l.setMinutes(0)):(l.setMinutes(l.getMinutes()+90),l.setMinutes(0));var c=l;for(e.firstSlot=(0,h.addDays)(c,0,0,30);s-c>36e5;)c=(0,h.addDays)(c,0,0,30),a.push(c);return a},this.areDetailsValid=function(){return!(!e.state.tableAvailable||!(e.state.numberOfPeople&&e.state.timeStamp&&null!=e.state.timeIndex||e.props.category_id>1))},this.handleBooking=function(){if(e.areDetailsValid()){var t={user_id:e.props.login_data.user_id,access_token:e.props.login_data.auth_token,deal_id:e.props.deal.deal_id,cashback_percent:e.props.deal.cashback_percent||0,max_cashback:e.props.deal.max_cashback||0};1===e.props.category_id&&(t.number_of_people=e.state.numberOfPeople,t.time=e.state.timeStamp),t.phone=e.props.userDetail.phone,t.name=e.props.userDetail.name,t.category_id=e.props.category_id}sendEvent("web_"+window.pageName,"click_confirm_booking","book_deal",t),e.props.bookDeal(t)},this.getMsgEmoticon=function(){return e.props.bookDealError?p.default.createElement("img",{className:"msg-emoticon",src:h.config.resourcepath+"images/failed.svg"}):1!==e.props.category_id&&e.props.dealBooked?p.default.createElement("img",{className:"msg-emoticon",src:h.config.resourcepath+"images/successfull_smile.svg"}):p.default.createElement("img",{className:"msg-emoticon",src:h.config.resourcepath+"images/review_icons.svg"})}};t.default=(0,d.connect)((function(e){return{userDetail:e.login.userDetail,isLoggedIn:e.login.isLoggedIn,bookingDeal:e.home.bookingDeal,dealBooked:e.home.dealBooked,response:e.home.response,bookDealError:e.home.bookDealError}}),{openLoginDialog:g.openLoginDialog,bookDeal:m.bookDeal})(b)},686:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=x(a(15)),i=x(a(11)),o=x(a(10)),r=x(a(14)),s=x(a(12)),l=x(a(13)),c=a(0),p=x(c),d=a(23),u=x(a(614)),m=x(a(730)),g=a(607),h=a(8),f=a(16),_=(a(42),a(233));a(777);var y=a(29),v=x(a(663));function x(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(){var e,a,n,r;(0,o.default)(this,t);for(var l=arguments.length,c=Array(l),p=0;p<l;p++)c[p]=arguments[p];return a=n=(0,s.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(c))),n.state={isMerchantDeliveryTabAvailable:!1},r=a,(0,s.default)(n,r)}return(0,l.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){"delivery"==this.props.page_type&&this.props.getMerchantData(this.props.merchantId);var e=(0,f.getUserData)(),t=e.lat,a=e.lon;t&&a||(t=this.props.lat&&0!=this.props.lat?this.props.lat:y.DEFAULT_LOCATION.lat,a=this.props.lon&&0!=this.props.lon?this.props.lon:y.DEFAULT_LOCATION.lon),"delivery"==pageProps.page_type?this.props.getCompanyGroupIdMerchants(pageProps.company_group_id,this.props.city,t,a,this.props.merchantId):pageProps.company_group_id&&this.props.getCompanyGroupIdMerchants(pageProps.company_group_id,this.props.city,t,a),document.querySelector('.merchant-navigation a[data-type="merchant-nav-magicorder"]')&&this.setState({isMerchantDeliveryTabAvailable:!0})}},{key:"componentDidUpdate",value:function(){window.Masonry&&loadMasonry&&loadMasonry()}},{key:"render",value:function(){var e=this.props,t=e.merchantData,a=void 0===t?{}:t,i=e.companyGroupOnlineVouchers,o=void 0===i?{}:i,r=e.companyGroupOfflineMerchants,s=void 0===r?{}:r;(0,h.isEmpty)(this.props.merchantDataRedux)||(a=this.props.merchantDataRedux);var l=void 0,c=void 0;(0,h.isEmpty)(s)||(l=s.some((function(e){return!e.voucher.is_out_of_stock})),c=s.some((function(e){return e.order_online})));var d=!this.props.companyGroupOnlineVouchersLoading&&(0,h.isEmpty)(o)&&!(0,h.isEmpty)(a)&&(0,h.isEmpty)(a.available_vouchers)&&!(0,h.isEmpty)(s)&&(c||l),_=!(0,h.isEmpty)(a)&&!(0,h.isEmpty)(a.available_vouchers)||!(0,h.isEmpty)(o),y=this.props.lat,x=this.props.lon,b=(0,f.getUserData)();(0,h.isEmpty)(b)||(y=(0,h.isEmpty)(b.lat)?y:b.lat,x=(0,h.isEmpty)(b.lon)?x:b.lon);var C=this.props.city;C||(0,h.isEmpty)(this.props.merchant)||(C=this.props.merchant.city);var D=pageProps.brand_outlet_url,N=0;(0,h.isEmpty)(s)||s.forEach((function(e){if(!(0,h.isEmpty)(e)&&!(0,h.isEmpty)(e.voucher)){var t=e.voucher.max_usable_percent;t=(0,h.isEmpty)(t)?0:t.split(" ")[1].slice(0,-1),N=Math.max(N,parseInt(t))}}));var P=this.props.url+"delivery/";return(0,h.isEmpty)(a)||(0,h.isEmpty)(a.available_vouchers)&&!a.enable_order_booking&&!a.is_magicpay_available&&(0,h.isEmpty)(o)&&!d?p.default.createElement("div",{className:"merchant-actions-container"},p.default.createElement(g.MerchantStripsLoader,{strips:this.props.strips})):p.default.createElement("div",{className:"merchant-actions-container"},_&&(0,h.vouchersInStock)(this.props.merchant_vouchers)&&p.default.createElement(w,{maxMagicpointsUsable:this.props.max_magicpoints_usable,merchantData:a,url:this.props.url,companyGroupOnlineVouchers:this.props.companyGroupOnlineVouchers}),!(0,h.isEmpty)(D)&&p.default.createElement(E,{url:D,maxPercentSave:N,name:this.props.name,outletCount:pageProps.total_outlets.length}),a.is_magicpay_available&&!(0,f.isPhonepeUser)()&&p.default.createElement(u.default,(0,n.default)({merchantData:a},this.props)),a.is_magicpay_available&&(0,f.isPhonepeUser)()&&p.default.createElement(m.default,(0,n.default)({merchantData:a},this.props)),!(0,h.isMobileDevice)()&&p.default.createElement(k,{url:P,merchantData:a,pageType:this.props.page_type}),pageProps.book_deal_available&&p.default.createElement(v.default,pageProps))}}]),t}(c.Component);t.default=(0,d.connect)((function(e){return{merchantDataRedux:e.merchant.merchantData,companyGroupOnlineVouchers:e.merchant.companyGroupOnlineVouchers,companyGroupOfflineMerchants:e.merchant.companyGroupOfflineMerchants,companyGroupID:e.merchant.companyGroupID,companyGroupOnlineVouchersLoading:e.merchant.companyGroupOnlineVouchersLoading}}),{getMerchantData:_.getMerchantData,getCompanyGroupIdMerchants:_.getCompanyGroupIdMerchants})(b);var w=function(e){function t(){var e,a,n,r;(0,o.default)(this,t);for(var l=arguments.length,c=Array(l),p=0;p<l;p++)c[p]=arguments[p];return a=n=(0,s.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(c))),n.sendImpressionEvent=function(){var e=document.getElementById("voucher-strip");e&&isInViewport(e)&&(sendEvent("web_"+window.pageName,"impression","voucher_strip",(0,h.getEventExtras)()),window.removeEventListener("scroll",n.sendImpressionEvent))},r=a,(0,s.default)(n,r)}return(0,l.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){(0,h.isEmpty)(this.props.merchantData.available_vouchers)||"vouchers"===pageProps.page_type||(sendEvent("web_"+window.pageName,"load","voucher_strip",(0,h.getEventExtras)()),window.addEventListener("scroll",this.sendImpressionEvent)),this.sendImpressionEvent()}},{key:"render",value:function(){var e=this.props,t=e.merchantData,a=e.url,n=e.companyGroupOnlineVouchers,i=t.starting_from;(0,h.isEmpty)(i)&&!(0,h.isEmpty)(n)&&(i=n.sort((function(e,t){return e.menu_amount>t.menu_amount?1:-1}))[0].menu_amount);var o=0;o=i>0?p.default.createElement("p",{className:"voucher-count"},"Vouchers from ₹",i):p.default.createElement("p",{className:"voucher-count"}," Save big on vouchers ");var r=void 0;return r=100===this.props.maxMagicpointsUsable||100===t.magicpay_percentage?p.default.createElement("p",{className:"buy-now free"},"Get it for FREE"):this.props.maxMagicpointsUsable>0||t.magicpay_percentage>0?p.default.createElement("p",{className:"buy-now"},"Save ",this.props.maxMagicpointsUsable||t.magicpay_percentage,"%"):p.default.createElement("p",{className:"buy-now"}," Buy now "),(!(0,h.isEmpty)(t.available_vouchers)||!(0,h.isEmpty)(n))&&"vouchers"!==pageProps.page_type&&p.default.createElement("a",{id:"voucher-strip","data-type":"merchant-buy-vouchers",className:"voucher-strip cta-strip",href:a+"vouchers/",onClick:function(){return sendEvent("web_"+window.pageName,"click","voucher_strip",(0,h.getEventExtras)())}},p.default.createElement("img",{height:"28",width:"28",alt:"buy voucher icon",className:"buy-vouchers-icon",src:h.config.resourcepath+"images/merchant/voucher-icon-new.svg"}),p.default.createElement("article",{className:"voucher-strip-details cta-details"},o),r)}}]),t}(c.Component),E=function(e){function t(){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this;this.props.outletCount&&this.props.outletCount>10&&this.props.outletCount;return this.props.url?p.default.createElement("a",{href:this.props.url,className:"otherOutletStrip",onClick:function(){sendEvent("web_"+window.pageName,"click","see_all_outlet_strip",{merchantId:e.props.merchantId})}},p.default.createElement("img",{height:"28",width:"28",alt:"other outlets icon",src:h.config.resourcepath+"images/merchant/magicOrder/order-online-logo.svg",className:"voucherIcon"}),p.default.createElement("div",{className:"sectionText"},"Save big on ",pageProps.total_outlets," other ",this.props.name," outlets"),p.default.createElement("div",{className:"otherOutletCTA"},"See ",this.props.outletCount," outlet(s)")):null}}]),t}(c.Component),k=function(e){function t(){var e,a,n,r;(0,o.default)(this,t);for(var l=arguments.length,c=Array(l),p=0;p<l;p++)c[p]=arguments[p];return a=n=(0,s.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(c))),n.sendImpressionEvent=function(){var e=document.getElementById("magic-order-strip");e&&isInViewport(e)&&(sendEvent("web_"+window.pageName,"impression","magic_order_strip",(0,h.getEventExtras)()),window.removeEventListener("scroll",n.sendImpressionEvent))},n.addMerchantNavigationTab=function(){document.querySelectorAll(".merchant-navigation").forEach((function(e){var t=document.createElement("a"),a=pageProps.merchant_user_id;t.innerText="DELIVERY",t.href=n.props.url,t.setAttribute("onclick","sendEvent('web_merchantpage', 'click', 'merchant_nav_magicorder', {'subject_type': 'merchant', 'subject_id': '"+a+"'});"),t.setAttribute("data-type","merchant-nav-magicorder"),e.insertBefore(t,e.childNodes[1])}))},r=a,(0,s.default)(n,r)}return(0,l.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){this.props.merchantData.enable_order_booking&&(sendEvent("web_"+window.pageName,"load","magic_order_strip",(0,h.getEventExtras)()),window.addEventListener("scroll",this.sendImpressionEvent)),this.sendImpressionEvent()}},{key:"render",value:function(){if("delivery"===this.props.pageType)return null;var e=this.props,t=e.merchantData,a=e.url;return t.enable_order_booking&&p.default.createElement("a",{onClick:function(){return sendEvent("web_"+window.pageName,"click","magic_order_strip",(0,h.getEventExtras)())},id:"magic-order-strip",href:a,className:"magic-order-strip cta-strip"},p.default.createElement("img",{height:"28",width:"28",alt:"magicorder strip icon",className:"magic-order-icon",src:h.config.resourcepath+"images/merchant/magic-order-icon.svg"}),p.default.createElement("section",{className:"magic-order-details cta-details"},p.default.createElement("p",{className:"magic-order-text"}," Place Order "),p.default.createElement("p",{className:"magicpay-offer"},t.delivery_percentage&&t.delivery_percentage>0?p.default.createElement("p",{className:"magicpay-offer"},p.default.createElement("span",{className:"magicpay-text"},p.default.createElement("img",{className:"magicCoin",src:h.config.resourcepath+"images/merchant/magicpay-icon.svg",alt:"magic pay icon"}),"Save ",t.delivery_percentage,"%")):null)),p.default.createElement("p",{className:"magic-order-cta"},"Order Now"))}}]),t}(c.Component)},730:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _defineProperty2=__webpack_require__(82),_defineProperty3=_interopRequireDefault(_defineProperty2),_stringify=__webpack_require__(54),_stringify2=_interopRequireDefault(_stringify),_getPrototypeOf=__webpack_require__(11),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(10),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(14),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(12),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(13),_inherits3=_interopRequireDefault(_inherits2),_connect,_react=__webpack_require__(0),_react2=_interopRequireDefault(_react),_reactCookie=__webpack_require__(28),_reactCookie2=_interopRequireDefault(_reactCookie),_reactRedux=__webpack_require__(23),_Dialog=__webpack_require__(53),_Dialog2=_interopRequireDefault(_Dialog),_Snackbar=__webpack_require__(216),_Snackbar2=_interopRequireDefault(_Snackbar),_helper=__webpack_require__(8),_login=__webpack_require__(43),_voucher=__webpack_require__(228),_search=__webpack_require__(36),_LocationDialog=__webpack_require__(633),_LocationDialog2=_interopRequireDefault(_LocationDialog);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var MagicPayDialog=function(_Component){function MagicPayDialog(props){(0,_classCallCheck3.default)(this,MagicPayDialog);var _this=(0,_possibleConstructorReturn3.default)(this,(MagicPayDialog.__proto__||(0,_getPrototypeOf2.default)(MagicPayDialog)).call(this,props));return _this.confirmAndBuy=function(e){var t=document.createElement("form");for(var a in t.method="post",t.action="https://pg.magicpin.com/payment_gateway/payment/phonePeInAppCallback",e){var n=document.createElement("input");n.type="hidden",n.name=a,n.value=e[a],t.appendChild(n)}document.body.appendChild(t),t.submit()},_this.payUsingPhonepe=function(e,t,a,n,i){var o={firstName:n.name,phone:n.phone,email:n.email_id,amount:t,pgAmount:a,accessToken:n.auth_token,userId:n.user_id,"app-version":20001,paymentMotive:"BILL_PAYMENT",useMPWallet:i,userType:"CUSTOMER_WEB",merchantUserId:e,lat:_reactCookie2.default.load("lat"),lon:_reactCookie2.default.load("lon"),isSpoofed:!1,country:"IN",callback_url:"https://magicpin.in/payment/result/"};_this.props.getTransactionId(o).then((function(){var t=new Date,n={merchantId:"MAGICPININAPP",transactionId:_this.props.orderId,merchantOrderId:_this.props.orderId,quantity:1,amount:Math.ceil(a),validFor:300,merchantOrderContext:{trackingUrl:"https://magicpin.in/phonepe/voucher/history/?id="+btoa(_this.props.login_data.phone),supportUrl:"http://magicpin.in"},fareDetails:{category:"SHOPPING",fareBreakup:[{fareType:"TOTAL_FARE",amount:String(100*a)}]},cartDetails:{cartItem:[{category:"SHOPPING",itemId:e,itemName:_this.props.merchant.name,price:100*a,quantity:1}],cartInfo:{category:"SHOPPING",shippingDate:(0,_helper.convertDate)(t)}}};_this.props.initiateServiceRequest(window.btoa((0,_stringify2.default)(n))).then((function(){PhonePe.PhonePe.build(PhonePe.Constants.Species.web).then((function(e){_this.setState({showLoader:!1}),e.openPaymentsPage("MAGICPIN",_this.props.phonepeData.data,"https://magicpin.in/phonepe/india/New-Delhi/vouchers","http://magicpin.in/static/images/logo.svg",[{Price:a},{Outlet:_this.props.merchant.name}]).then((function(e){_this.setState({showLoader:!0}),_this.confirmAndBuy({transactionId:_this.props.orderId,userId:_reactCookie2.default.load("user_id")})})).catch((function(e){_this.setState({showLoader:!0}),_this.confirmAndBuy({transactionId:_this.props.orderId,userId:_reactCookie2.default.load("user_id")})}))}))}))}))},_this.pay=function(){if(_this.setState({disabled:!0}),0==_this.state.payableAmount)_this.props.magicPayUsingMP(_this.props.merchant_id,_this.state.amount,_this.props.userDetail.phone);else{var e=_this.state.checked?1:0;_this.payUsingPhonepe(_this.props.merchant_id,_this.state.amount,_this.state.payableAmount,_this.props.login_data,e)}},_this.getWalletBalance=function(){var e=_reactCookie2.default.load("user_id"),t=_reactCookie2.default.load("auth_token"),a=_this.props.userDetail.phone;e&&t&&a&&_this.props.getUserWalletBalance(a,e,t)},_this.handleOpen=function(){_this.state.isLoggedIn?(_this.setState({open:!0}),_this.getWalletBalance()):_this.props.openLoginDialog(!0)},_this.handleClose=function(){_this.setState({open:!1})},_this.handleCheckbox=function(){_this.setState({checked:!_this.state.checked,payableAmount:_this.state.checked?_this.state.pgAmount+_this.state.magicpinAmount:_this.state.pgAmount,totalmpAmount:_this.state.amount?_this.state.magicpinAmount:0,currWalletBal:_this.state.checked?_this.state.walletBal:_this.state.walletBal-_this.state.magicpinAmount})},_this.handleAmount=(0,_helper.debounce)((function(e){_this.setState({amount:e||0,disabled:!e.length},(function(){_this.props.getPaymentDivisionMagicPay(_this.props.merchant_id,_this.state.amount,_this.props.userDetail.phone)}))}),250),_this.state={is_new_user:eval(_reactCookie2.default.load("is_new_user"))||!1,open:!1,checked:!0,amount:0,payableAmount:0,pgAmount:0,totalmpAmount:0,magicpinAmount:0,currWalletBal:0,walletBal:0,disabled:!0,openLocationPopup:!1,isUserLocated:!1},_this}return(0,_inherits3.default)(MagicPayDialog,_Component),(0,_createClass3.default)(MagicPayDialog,[{key:"componentDidMount",value:function(){var e=_reactCookie2.default.load("user_id"),t=_reactCookie2.default.load("auth_token"),a=_reactCookie2.default.load("user_w_id");e&&t&&a&&this.props.getUserWalletBalance(atob(a),e,t),_reactCookie2.default.load("user_id")&&_reactCookie2.default.load("auth_token")&&this.props.checkLogin(_reactCookie2.default.load("user_id"),_reactCookie2.default.load("auth_token")),_reactCookie2.default.load("lat")&&_reactCookie2.default.load("lan")&&this.setState({isUserLocated:!0})}},{key:"componentWillReceiveProps",value:function(e){e.walletData&&this.setState({walletBal:e.walletData.balance,currWalletBal:e.walletData.balance}),e.fetchingBalanceFailed&&this.setState({open:!1,openSnackBar:!0,message:"Unable to process magicpay. Refresh and retry."});var t=e.paymentDivisionResult;t&&this.setState({magicpinAmount:t.magicpin_amount,pgAmount:t.pg_amount,totalmpAmount:this.state.amount?t.magicpin_amount:0,payableAmount:this.state.checked?t.pg_amount:t.pg_amount+t.magicpin_amount,currWalletBal:this.state.checked?this.state.walletBal-t.magicpin_amount:this.state.walletBal}),e.openLocDialog?this.setState({openLocationPopup:e.openLocDialog}):this.setState({disabled:!1,openLocationPopup:!1}),e.isUserLocated&&this.setState({isUserLocated:e.isUserLocated,disabled:!1}),e.phonepeLoggedIn?this.setState({isLoggedIn:e.phonepeLoggedIn}):this.setState({isLoggedIn:e.isLoggedIn})}},{key:"render",value:function(){var e=this,t=this.props.merchantData,a=void 0===t?{}:t;return _react2.default.createElement("div",{className:"magic-pay-popup"},_react2.default.createElement("article",{id:"magicpay-strip",className:"magicpay-strip cta-strip",onClick:this.handleOpen},_react2.default.createElement("img",{className:"magic-order-icon",src:_helper.config.resourcepath+"images/merchant/magic-pay-icon.svg"}),_react2.default.createElement("section",{className:"magicpay-details cta-details"},_react2.default.createElement("p",{className:"magicpay-heading"},"Pay your bill here"),_react2.default.createElement("p",{className:"magicpay-offer"},a.is_magicpay_available&&a.magicpay_percentage>0&&_react2.default.createElement("p",{className:"magicpay-offer"},_react2.default.createElement("img",{src:_helper.config.resourcepath+"images/merchant/magicpay-icon.svg",alt:""}),_react2.default.createElement("span",{className:"magicpay-text"},"Save ",a.magicpay_percentage,"%")),parseInt(a.cashback_percent)>0&&parseInt(a.cashback_value)>0&&_react2.default.createElement("span",{className:"magicpay-text"},a.is_magicpay_available&&" + ","Earn ",a.cashback_percent," upto ",a.cashback_value))),_react2.default.createElement("p",{className:"magic-pay-cta "+(a.enable_order_booking?"text":"button")}," magicPay ")),_react2.default.createElement(_Dialog2.default,{open:this.state.open,onClose:this.handleClose,className:"magic-pay-dialog",PaperProps:{style:{backgroundColor:"rgb(130, 29, 255)",position:"relative"}},fullScreen:!0},_react2.default.createElement("section",{className:"amount-container"},_react2.default.createElement("div",{className:"header"},_react2.default.createElement("img",{className:"magicpay-close",src:_helper.config.resourcepath+"images/back-white.svg",onClick:this.handleClose}),_react2.default.createElement("span",{className:"header-text"},"magicPay your bill"),isEmpty(this.props.merchant)?_react2.default.createElement("span",{className:"merchant-detail"},this.props.name):_react2.default.createElement("span",{className:"merchant-detail"},this.props.merchant.name||this.props.name,this.props.merchant.locality&&", "+this.props.merchant.locality," ",this.props.merchant.city&&", "+this.props.merchant.city)),_react2.default.createElement("div",{className:"amount-section"},_react2.default.createElement("span",{className:"rupee-sign"},"₹"),_react2.default.createElement("input",{autoFocus:!0,type:"number",className:"enter-amount",placeholder:"Amount",onChange:function(t){return e.handleAmount(t.target.value)}}))),_react2.default.createElement("section",{className:"payment-details-container"},_react2.default.createElement("div",{className:"magicpay-points"},_react2.default.createElement("input",{type:"checkbox",className:"check-points",onClick:this.handleCheckbox,defaultChecked:this.state.checked}),_react2.default.createElement("span",{className:"save-points"},"Save ",this.props.magicpay_percent,"% with your points"),this.state.totalmpAmount>0&&_react2.default.createElement("p",{className:"total-amount"},_react2.default.createElement("span",null," - ",this.state.totalmpAmount," "),_react2.default.createElement("img",{className:"coinIcon",src:_helper.config.resourcepath+"images/magic-coin.png",alt:""}))),_react2.default.createElement("hr",{className:"paymentSeperator"}),_react2.default.createElement("article",{className:"magicpayAmountHolder"},_react2.default.createElement("section",{className:"savingInfo"},isEmpty(this.props.paymentDivisionResult)||isEmpty(this.props.paymentDivisionResult.maxSavings)?_react2.default.createElement("p",{className:"savingAmount"}," You save: ₹-- "):_react2.default.createElement("p",{className:"savingAmount"}," You save:",_react2.default.createElement("span",null,"₹",this.props.paymentDivisionResult.maxSavings||0))),_react2.default.createElement("button",{className:"pay-btn",onClick:this.pay,disabled:this.state.disabled},this.props.isLoggedIn?"Pay ₹"+(this.state.payableAmount>0?this.state.payableAmount:"--"):"Save "+a.magicpay_percentage+"%")))),this.state.openLocationPopup&&_react2.default.createElement(_LocationDialog2.default,{openDialog:this.state.openLocationPopup}),this.state.openSnackBar&&_react2.default.createElement(_Snackbar2.default,{open:this.state.openSnackBar,message:this.state.message}),this.props.showLoader&&_react2.default.createElement(CircularProgress,null))}}]),MagicPayDialog}(_react.Component);exports.default=(0,_reactRedux.connect)((function(e){return(0,_defineProperty3.default)({walletData:e.login.walletData,paymentDivisionResult:e.voucher.magicpayPaymentDivisionResult,couponInfo:e.voucher.couponInfo,success:e.voucher.success,paymentMagicpayMPResult:e.voucher.paymentMagicpayMPResult,isUserLocated:e.search.isUserLocated,openLocDialog:e.search.openLocationDialog,isLoggedIn:e.login.isLoggedIn,orderId:e.voucher.orderId,userDetail:e.login.userDetail,phonepeData:e.voucher.phonepeData,phonepeLoggedIn:e.voucher.phonepe_data_fetch_complete},"isLoggedIn",e.login.isLoggedIn)}),(_connect={openLoginDialog:_login.openLoginDialog,getUserWalletBalance:_login.getUserWalletBalance,getPaymentDivisionMagicPay:_voucher.getPaymentDivisionMagicPay,magicPayUsingMP:_voucher.magicPayUsingMP,openLocationDialog:_search.openLocationDialog,getTransactionId:_voucher.getTransactionId,initiateServiceRequest:_voucher.initiateServiceRequest},(0,_defineProperty3.default)(_connect,"getTransactionId",_voucher.getTransactionId),(0,_defineProperty3.default)(_connect,"initiateServiceRequest",_voucher.initiateServiceRequest),(0,_defineProperty3.default)(_connect,"confirmAndBuy",_voucher.confirmAndBuy),(0,_defineProperty3.default)(_connect,"checkLogin",_login.checkLogin),_connect))(MagicPayDialog)},777:function(e,t,a){var n=a(25),i=a(778);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},r=(n(i,o),i.locals?i.locals:{});e.exports=r},778:function(e,t,a){(t=a(26)(!1)).push([e.i,".voucher-strip-details .freeVouchers {\n    color: #3b74fc;\n    font-size: 16px;\n    font-weight: 500;\n}\n\n.merchant-actions-container .otherOutletStrip {\n    display: flex;\n    align-items: center;\n    padding: 12px;\n    padding-right: 16px;\n    border: 1px solid rgba(0,0,0,.12);\n    border-radius: 8px;\n    background: linear-gradient(90deg,#fff1f7,#fefefe);\n}\n\n.otherOutletStrip .sectionText {\n    line-height: 20px;\n    font-size: 12px;\n    font-weight: bold;\n    color: rgba(0,0,0,.87);\n    width: 50%;\n    flex-grow: 1;\n}\n\n.otherOutletStrip .voucherIcon {\n    margin-right: 12px;\n}\n\n.otherOutletStrip .otherOutletCTA {\n    border: 1px solid #ef1c71;\n    padding: 8px;\n    color: #ef1c71;\n    border-radius: 4px;\n    font-size: 12px;\n    margin-left: 6px;\n}\n\n@media(max-width: 800px) {\n    .merchant-actions-container .otherOutletStrip {\n        border-radius: 0px;\n        border-bottom: none\n    }\n}",""]),e.exports=t},818:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(105)),i=h(a(11)),o=h(a(10)),r=h(a(14)),s=h(a(12)),l=h(a(13)),c=h(a(0)),p=h(a(53)),d=a(23),u=a(582),m=a(8),g=a(233);function h(e){return e&&e.__esModule?e:{default:e}}a(1156);var f=function(e){function t(e){(0,o.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));a.setEventListener=function(){if(a.state.openPopup){var e=document.querySelector(".contentContainer"),t=e.querySelector(".commentContainerLoader");e.addEventListener("scroll",(function(n){var i=e.getBoundingClientRect(),o=void 0;t&&(o=t.getBoundingClientRect(),i.bottom>o.top-200&&a.infiniteLoad())}))}},a.infiniteLoad=function(){a.props.merchantReviewsLoading||-1===a.state.offset||a.props.getMerchantReviews(a.props.merchant_user_id,a.state.offset)},a.getRatingColor=function(e){var t={1:"#ff6c5b",2:"#ffc20f",3:"#8bcc00",4:"#00ae28",5:"#008a3b"}[Math.round(parseFloat(e))];return t||"#fbc02d"},a.openPopup=function(){a.setState({openPopup:!0})},a.closePopup=function(){a.setState({openPopup:!1})},a.getRatingStars=function(e){var t=Math.round(parseFloat(e));if(t<=5){var a=new Array(t).fill(m.config.resourcepath+"images/merchant/star.svg"),n=new Array(5-t).fill(m.config.resourcepath+"images/merchant/star-dull.svg");return a.concat(n).map((function(e,t){return c.default.createElement("img",{key:t,className:"single-star",src:e,alt:"star"})}))}},a.getConditionalClasses=function(){return a.props.merchant_rating_details.top_reviews.length>=3?"default":2===a.props.merchant_rating_details.top_reviews.length?"two":1===a.props.merchant_rating_details.top_reviews.length?"one":void 0},a.handleBrokenImage=function(e){var t=m.config.resourcepath+"images/profile.svg";e.target.src=t};var r=[].concat((0,n.default)(a.props.merchant_rating_details.rating_count)).reverse(),l=a.props.detailed_reviews||[];return a.state={ratingCount:r,openPopup:!1,people_list:(0,m.isEmpty)(l)?[]:l,offset:0},a}return(0,l.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=this;window.location.search.includes("reviews-popup")&&this.setState({openPopup:!0}),this.props.getMerchantReviews(this.props.merchant_user_id,this.state.offset).then((function(t){var a=JSON.parse(t);a.data&&a.next&&e.setState((function(e){var t=Array.isArray(a.data)?a.data:[];return{people_list:e.people_list.concat(t),offset:a.next}}))}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;this.state.openPopup&&!t.openPopup&&setTimeout((function(){a.setEventListener()}),500),(0,m.isEqual)(this.props.merchantReviewsDetails,e.merchantReviewsDetails)||(0,m.isEmpty)(this.props.merchantReviewsDetails)||this.setState((function(e){var t=Array.isArray(a.props.merchantReviewsDetails.data)?a.props.merchantReviewsDetails.data:[];return{people_list:e.people_list.concat(t),offset:a.props.merchantReviewsDetails.next}}))}},{key:"render",value:function(){var e=this;return c.default.createElement(c.default.Fragment,null,c.default.createElement("img",{src:m.config.resourcepath+"images/left_arrow.svg",alt:"arrow",className:"reviewArrow",onClick:this.openPopup}),c.default.createElement(p.default,{open:this.state.openPopup,scroll:"paper",PaperProps:(0,m.isMobileDevice)()?{style:{width:"100%",padding:"0px",borderRadius:"8px",margin:"0px",position:"fixed",bottom:"0px",maxHeight:"500px",minHeight:"500px"}}:{style:{width:"500px",padding:"0px",borderRadius:"10px",maxHeight:"600px",minHeight:"600px",overflow:"hidden"}}},c.default.createElement(u.DialogTitle,{className:"dialog title"},c.default.createElement("div",{className:"headingContainer"},"Ratings & Reviews",c.default.createElement("br",null),c.default.createElement("span",{className:"merchantName"},this.props.name),c.default.createElement("img",{alt:"close icon",src:m.config.resourcepath+"images/close-grey.svg",className:"close-icon",onClick:this.closePopup}))),c.default.createElement("div",{className:"contentContainer"},c.default.createElement("div",{className:"rating-details"},c.default.createElement("div",{className:"rating-value"},c.default.createElement("span",{className:"rating"},(0,m.parseFixedFloat)(this.props.merchant_rating_details.rating_value,1)),c.default.createElement("span",{className:"max-value"},"/5"),c.default.createElement("br",null),c.default.createElement("span",{className:"rating-count"},(0,m.formatNumber)(this.props.merchant_rating_details.total_rating_count)," ratings")),c.default.createElement("div",{className:"count-division-detail"},this.state.ratingCount.map((function(t,a){return c.default.createElement("div",{key:a,className:"detail-container"},c.default.createElement("span",{className:"count-label"},t.rating,c.default.createElement("img",{alt:"rating star",src:m.config.resourcepath+"images/merchant/star-gray.svg",className:"star"})),c.default.createElement("div",{className:"ratingBarHolder"},c.default.createElement("div",{className:"ratingBar",style:{width:t.percentage+"%",background:""+e.getRatingColor(t.rating)}})),c.default.createElement("span",{className:"rating-count"},(0,m.formatNumber)(t.count)))})))),this.props.merchant_rating_details.top_reviews&&c.default.createElement("div",{className:"topReviewsContainer"},c.default.createElement("h3",{className:"containerHeading"},"What people love about this place"),c.default.createElement("div",{className:"subContainer "+this.getConditionalClasses()},this.props.merchant_rating_details.top_reviews.map((function(t,a){return c.default.createElement("div",{key:a,className:"singleReview"},c.default.createElement("div",{className:"chartContainer"},c.default.createElement(u.CircularProgress,{className:"track",variant:"determinate",color:"secondary",value:100,style:{width:"60px",height:"60px"}}),c.default.createElement(u.CircularProgress,{className:"fill",variant:"determinate",color:"primary",value:t.percentage,style:{color:""+e.getRatingColor(t.rating),width:"60px",height:"60px"}})),c.default.createElement("span",{className:"percentage"},t.percentage,"%"),c.default.createElement("span",{className:"desc"},t.title))})))),c.default.createElement("div",{className:"userComments"},this.state.people_list&&this.state.people_list.map((function(t){var a=t.name?t.name:t.user&&t.user.name?t.user.name:"",n=t.profile_pic?t.profile_pic:t.user&&t.user.profile_pic?t.user.profile_pic:"";return c.default.createElement("div",{className:"commentContainer"},c.default.createElement("div",{className:"profile_pic_container"},c.default.createElement("img",{alt:"user profile",onError:e.handleBrokenImage,className:"profile_pic",src:n||m.config.resourcepath+"images/profile.svg"})),c.default.createElement("div",{className:"review-text-container"},c.default.createElement("h4",{className:"userName"},a),c.default.createElement("div",{className:"extra-info"},c.default.createElement("div",null,c.default.createElement("div",{className:"starContainer"},e.getRatingStars(t.rating)," "),c.default.createElement("span",{className:"ratingType"},t.rating_text)),c.default.createElement("span",{className:"review-date"},(0,m.isoToDate)(t.review_date,!0))),c.default.createElement("p",{className:"reviewTitle"},t.review_title),c.default.createElement("p",{className:"reviewContent"},t.review)))})),-1!==this.state.offset?c.default.createElement("div",{className:"commentContainerLoader"}):null))))}}]),t}(c.default.Component);t.default=(0,d.connect)((function(e){return{merchantReviewsDetails:e.merchant.merchantReviewsDetails,merchantReviewsLoading:e.merchant.merchantReviewsLoading,merchantReviewsFailure:e.merchant.merchantReviewsFailure}}),{getMerchantReviews:g.getMerchantReviews})(f)}}]);